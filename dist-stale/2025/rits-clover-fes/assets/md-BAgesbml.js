import{b as e,o as t,w as c,g as s,D as l,v as r,x as p,z as F}from"./modules/vue-Beh-9Uef.js";import{I as y}from"./slidev/center-Yvl107-o.js";import{u as i,f as _}from"./slidev/context-CV8uhwEh.js";import"./index-CbgbnT81.js";import"./modules/shiki-DsjaKt4r.js";const x={__name:"slides.md__slidev_19",setup(C){const{$clicksContext:n,$frontmatter:a}=i();return n.setup(),(E,o)=>(t(),e(y,r(p(F(_)(F(a),18))),{default:c(()=>[...o[0]||(o[0]=[s("h1",null,"ESP32での実際のCAN送信コード (関数内部)",-1),s("div",{class:"h-100 overflow-y-scroll"},[s("pre",{class:"shiki theme-penguin slidev-code",style:{"background-color":"#282A36",color:"#F8F8F2"}},[s("code",{class:"language-cpp"},[s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"void"),s("span",{style:{color:"#F8F8F2"}}," CanCommunicator"),s("span",{style:{color:"#FF79C6"}},"::"),s("span",{style:{color:"#50FA7B"}},"transmit"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FF79C6"}},"const"),s("span",{style:{color:"#8BE9FD","font-style":"italic"}}," CanTxMessage"),s("span",{style:{color:"#FFB86C","font-style":"italic"}}," message"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#FF79C6"}},"const"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"        static"),s("span",{style:{color:"#FF79C6"}}," uint32_t"),s("span",{style:{color:"#F8F8F2"}}," count "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}}," 0"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"        // CANメッセージ構築")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8BE9FD","font-style":"italic"}},"        twai_message_t"),s("span",{style:{color:"#F8F8F2"}}," tx_message;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        tx_message.identifier "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," message.id;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        tx_message.extd "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}}," 0"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        tx_message.rtr "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}}," 0"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        tx_message.ss "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}}," 0"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        tx_message.self "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}}," 0"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        tx_message.dlc_non_comp "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}}," 0"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        tx_message.data_length_code "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}}," 8"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"        for"),s("span",{style:{color:"#F8F8F2"}}," ("),s("span",{style:{color:"#FF79C6"}},"uint8_t"),s("span",{style:{color:"#F8F8F2"}}," i "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}}," 0"),s("span",{style:{color:"#F8F8F2"}},"; i "),s("span",{style:{color:"#FF79C6"}},"<"),s("span",{style:{color:"#BD93F9"}}," 8"),s("span",{style:{color:"#F8F8F2"}},"; i"),s("span",{style:{color:"#FF79C6"}},"++"),s("span",{style:{color:"#F8F8F2"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            tx_message.data[i] "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," message.data[i];")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"        // CANメッセージ送信")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"        const"),s("span",{style:{color:"#FF79C6"}}," auto"),s("span",{style:{color:"#F8F8F2"}}," tx_result "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#50FA7B"}}," twai_transmit_v2"),s("span",{style:{color:"#F8F8F2"}},"(twai_handle, "),s("span",{style:{color:"#FF79C6"}},"&"),s("span",{style:{color:"#F8F8F2"}},"tx_message, "),s("span",{style:{color:"#BD93F9"}},"0"),s("span",{style:{color:"#F8F8F2"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"        // デバッグ用出力")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"        if"),s("span",{style:{color:"#F8F8F2"}}," (count "),s("span",{style:{color:"#FF79C6"}},"%"),s("span",{style:{color:"#F8F8F2"}}," DEBUG_PRINT_INTERVAL "),s("span",{style:{color:"#FF79C6"}},"=="),s("span",{style:{color:"#BD93F9"}}," 0"),s("span",{style:{color:"#F8F8F2"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"            #ifdef"),s("span",{style:{color:"#50FA7B"}}," CAN_DEBUG")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"            if"),s("span",{style:{color:"#F8F8F2"}}," (tx_result "),s("span",{style:{color:"#FF79C6"}},"=="),s("span",{style:{color:"#F8F8F2"}}," ESP_ERR_TIMEOUT) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"                Serial."),s("span",{style:{color:"#50FA7B"}},"println"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"Transmit Fail: ESP_ERR_TIMEOUT"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"                return"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"            if"),s("span",{style:{color:"#F8F8F2"}}," (tx_result "),s("span",{style:{color:"#FF79C6"}},"=="),s("span",{style:{color:"#F8F8F2"}}," ESP_ERR_INVALID_ARG) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"                Serial."),s("span",{style:{color:"#50FA7B"}},"println"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"Transmit Fail: ESP_ERR_INVALID_ARG"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"                return"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"            if"),s("span",{style:{color:"#F8F8F2"}}," (tx_result "),s("span",{style:{color:"#FF79C6"}},"=="),s("span",{style:{color:"#F8F8F2"}}," ESP_ERR_INVALID_STATE) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"                Serial."),s("span",{style:{color:"#50FA7B"}},"println"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"Transmit Fail: ESP_ERR_INVALID_STATE"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"                return"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"            if"),s("span",{style:{color:"#F8F8F2"}}," (tx_result "),s("span",{style:{color:"#FF79C6"}},"=="),s("span",{style:{color:"#F8F8F2"}}," ESP_FAIL) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"                Serial."),s("span",{style:{color:"#50FA7B"}},"println"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"Transmit Fail: ESP_FAIL"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"                return"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"            if"),s("span",{style:{color:"#F8F8F2"}}," (tx_result "),s("span",{style:{color:"#FF79C6"}},"=="),s("span",{style:{color:"#F8F8F2"}}," ESP_ERR_NOT_SUPPORTED) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"                Serial."),s("span",{style:{color:"#50FA7B"}},"println"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"Transmit Fail: ESP_ERR_NOT_SUPPORTED"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"                return"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"            if"),s("span",{style:{color:"#F8F8F2"}}," (tx_result "),s("span",{style:{color:"#FF79C6"}},"!="),s("span",{style:{color:"#F8F8F2"}}," ESP_OK) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"                Serial."),s("span",{style:{color:"#50FA7B"}},"println"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"Transmit Fail: Unexpected error: "),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#FF79C6"}}," +"),s("span",{style:{color:"#50FA7B"}}," String"),s("span",{style:{color:"#F8F8F2"}},"(tx_result));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"                return"),s("span",{style:{color:"#F8F8F2"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"            #endif")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    }")])])])],-1)])]),_:1},16))}};export{x as default};
