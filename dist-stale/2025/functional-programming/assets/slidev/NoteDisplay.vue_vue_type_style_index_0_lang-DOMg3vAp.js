import{d as B,z as h,f as p,n as m,g as c,T as H,F as $,t as y,al as T,an as N,am as z,k as E,o as f,r as A,K as I,L as F,E as P,p as K}from"../modules/vue-Dn2qnHhJ.js";import{r as R,v as V,C as D,_ as j}from"../index-D3f0yoye.js";const q=["title"],U={class:"flex gap-0.2 items-center min-w-16 font-mono mr1"},X={"text-primary":""},G={op50:"","text-sm":""},J={key:1,op50:"","flex-auto":"",pl1:""},O={relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~"},Q=["min","max"],W=B({__name:"ClicksSlider",props:{clicksContext:{},readonly:{type:Boolean},active:{type:Boolean,default:!0}},setup(u){const d=u,t=h(()=>d.clicksContext.total),x=h(()=>R(0,d.clicksContext.clicksStart,t.value)),v=h(()=>t.value-x.value+1),s=h({get(){return d.clicksContext.current>t.value?-1:d.clicksContext.current},set(k){d.clicksContext.current=k}}),C=h(()=>V(x.value,t.value+1));function b(){d.readonly||(s.value<0||s.value>t.value)&&(s.value=0)}return(k,r)=>(f(),p("div",{class:m(["flex gap-1 items-center select-none",v.value&&d.clicksContext.isMounted?"":"op50"]),title:`Clicks in this slide: ${v.value}`},[c("div",U,[r[4]||(r[4]=c("div",{class:"i-carbon:cursor-1 text-sm op50"},null,-1)),s.value>=0&&s.value!==H(D)&&u.active?(f(),p($,{key:0},[r[2]||(r[2]=c("div",{"flex-auto":""},null,-1)),c("span",X,y(s.value),1),r[3]||(r[3]=c("span",{op25:"","text-sm":""},"/",-1)),c("span",G,y(t.value),1)],64)):(f(),p("div",J,y(t.value),1))]),c("div",O,[(f(!0),p($,null,N(C.value,o=>(f(),p("div",{key:o,border:"y main","of-hidden":"",relative:"",class:m([o===0?"rounded-l border-l":"",o===t.value?"rounded-r border-r":""]),style:E({width:v.value>0?`${1/v.value*100}%`:"100%"})},[c("div",{absolute:"","inset-0":"",class:m(o<=s.value&&u.active?"bg-primary op15":"")},null,2),c("div",{class:m([+o==+s.value&&u.active?"text-primary font-bold op100 border-primary":"op30 border-main",o===0?"rounded-l":"",o===t.value?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},y(o),3)],6))),128)),T(c("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>s.value=o),class:m(["range",u.readonly?"pointer-events-none":""]),type:"range",min:x.value,max:t.value,step:1,absolute:"","inset-0":"","z-label":"",op0:"",style:E({"--thumb-width":`${1/(v.value+1)*100}%`}),onMousedown:b,onFocus:r[1]||(r[1]=o=>o.currentTarget?.blur())},null,46,Q),[[z,s.value]])])],10,q))}}),oe=j(W,[["__scopeId","data-v-a1799a70"]]),Y=["innerHTML"],Z=["textContent"],ee=["textContent"],L="slidev-note-fade",g="slidev-note-click-mark",ne=B({__name:"NoteDisplay",props:{class:{},noteHtml:{},note:{},highlight:{type:Boolean,default:!0},placeholder:{},clicksContext:{},autoScroll:{type:Boolean}},emits:["markerDblclick","markerClick"],setup(u,{emit:d}){const t=u,x=d,v=h(()=>t.clicksContext!=null&&t.noteHtml?.includes(g)),s=A(null);function C(){if(!s.value||!v.value)return;const k=Array.from(s.value.querySelectorAll(`.${g}`)),r=new Map,o=new Map;let M=0;for(const a of k){const n=Number(a.dataset.clicks);r.set(a,n);let l=a,e=a.parentElement;for(;e&&l!==s.value;)o.has(e)||o.set(e,[[null,M]]),o.get(e).push([l,n]),l=e,e=e.parentElement;M=n}const S=new Map;for(const[a,n]of o){let l=!1,e=0;for(const i of Array.from(a.childNodes)){let w=!1;for(;i===n[e+1]?.[0];)w=!0,e++;if(w)continue;let _=i;if(i.nodeType===3){if(!i.textContent?.trim())continue;_=document.createElement("span"),_.textContent=i.textContent,a.insertBefore(_,i),i.remove()}l||=e===0,S.set(_,n[e][1])}l||(n[0][1]=-1)}return a=>{const n=t.highlight;for(const[l,e]of o)l.classList.toggle(L,n&&!e.some(([i,w])=>w===a));for(const[l,e]of S)l.classList.toggle(L,n&&e!==a);for(const[l,e]of r)l.classList.remove(L),l.classList.toggle(`${g}-past`,n&&e<a),l.classList.toggle(`${g}-active`,n&&e===a),l.classList.toggle(`${g}-next`,n&&e===a+1),l.classList.toggle(`${g}-future`,n&&e>a+1),l.ondblclick=i=>{n&&(x("markerDblclick",i,e),!i.defaultPrevented&&(t.clicksContext.current=e,i.stopPropagation(),i.stopImmediatePropagation()))},l.onclick=i=>{n&&x("markerClick",i,e)},n&&t.autoScroll&&e===a&&l.scrollIntoView({block:"center",behavior:"smooth"})}}const b=A();return I(()=>[t.noteHtml,t.highlight],()=>{K(()=>{b.value=C()})},{immediate:!0}),F(()=>{C()}),P(()=>{const k=t.clicksContext?.current??D;b.value?.(k)}),(k,r)=>u.noteHtml?(f(),p("div",{key:0,ref_key:"noteDisplay",ref:s,class:m(["prose dark:prose-invert overflow-auto outline-none slidev-note",[t.class,v.value?"slidev-note-with-clicks":""]]),innerHTML:u.noteHtml},null,10,Y)):u.note?(f(),p("div",{key:1,class:m(["prose dark:prose-invert overflow-auto outline-none slidev-note",t.class])},[c("p",{textContent:y(u.note)},null,8,Z)],2)):(f(),p("div",{key:2,class:m(["prose dark:prose-invert overflow-auto outline-none opacity-50 italic select-none slidev-note",t.class])},[c("p",{textContent:y(t.placeholder||"No notes.")},null,8,ee)],2))}});export{oe as C,ne as _};
